#!/usr/bin/perl
use strict;
use DBI;

use QuizMaker;

#
# qzm-preview.pl
#
# Load a problem from a file and preview it.
#

#use File::Basename;
use File::Spec;

# XXX - reanme this if your db is named something else
my $dbname = 'quizmaker';

my $dbh = DBI->connect("dbi:Pg:dbname=$dbname")
	or exit 1;
# DBI will produce an error message so another one is not needed here.

my ($file) = @ARGV;

$file = File::Spec->rel2abs($file);

my $usage =
"a.out myproblem.pl > myproblem.tex

  Produces LaTeX output for a single problem.
  This output can then be processed to produce a preview.

    rubber --pdf myproblem.tex
    xpdf myproblem.pdf
";

die "$usage\n" unless (@ARGV and defined $file and -e $file);

#print "Processing: $file\n";

my $qzm = QuizMaker->new('title' => 'skel.pl');

my $qzp = $qzm->load_file($file)
    or die ;

print $qzm->tex_header();

print $qzp->to_tex(1, 'display answer');

print $qzm->tex_footer();

